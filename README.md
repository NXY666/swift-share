# å¿«ä¼ <img align="right" alt="å¿«ä¼ å›¾æ ‡" src="https://github.com/NXY666/swift-share/assets/62371554/cda94cf6-9944-4706-8f5f-6199e6b5816e" title="å¿«ä¼ " width="60"/>

### ç®€å•ã€å¿«æ·ã€ä¸€ç›®äº†ç„¶

[![npm](https://img.shields.io/npm/v/swift-share?style=flat-square)](https://www.npmjs.com/package/swift-share)
[![npm](https://img.shields.io/npm/dt/swift-share?style=flat-square)](https://www.npmjs.com/package/swift-share)
[![npm](https://img.shields.io/npm/unpacked-size/swift-share?style=flat-square)](https://www.npmjs.com/package/swift-share)
[![GitHub](https://img.shields.io/github/license/NXY666/swift-share?style=flat-square)](https://github.com/NXY666/swift-share/blob/master/LICENSE)

## ğŸ”¥ åŠŸèƒ½

<!--suppress HtmlDeprecatedAttribute -->
<details>
<summary>ğŸ’¬ <b>æ–‡æœ¬ç›´ä¼ ã€‚</b>é›¶æ•£æ–‡æœ¬æ— éœ€ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œæ”¯æŒç›´æ¥ä¼ é€’æ–‡æœ¬ä¿¡æ¯ã€‚</summary>
<p align="center">
  <img alt="ç½‘é¡µæˆªå›¾ï¼ˆæ–‡æœ¬ï¼‰" src="https://github.com/NXY666/swift-share/assets/62371554/2ee44445-9bd6-4811-abcd-4c44f8bbde8d" width="400"/>
</p>
</details>
<details>
<summary>ğŸ—’ï¸ <b>æ–‡ä»¶ä¼ è¾“ã€‚</b>æä¾›å•æå–ç å¤šæ–‡ä»¶ä¸Šä¼ æ”¯æŒã€‚æ™ºèƒ½ä¸Šä¼ ï¼Œè¾¹ä¼ è¾¹ä¸‹ã€‚</summary>
<p align="center">
  <img alt="ç½‘é¡µæˆªå›¾ï¼ˆæ–‡ä»¶ï¼‰" src="https://github.com/NXY666/swift-share/assets/62371554/be027f6f-95b6-44cb-81a6-12f3ccf5e991" width="400"/>
</p>
</details>
<details>
<summary>ğŸ“¨ <b>å®æ—¶æŠ•é€ã€‚</b>æ‰‹æœºæ‰«ç è¿æ¥è®¾å¤‡ï¼Œå³ä½¿æ˜¯ç”µè§†ä¹Ÿèƒ½ç¨³å®šæ¥æ”¶ã€‚</summary>
<p align="center">
  <img alt="ç½‘é¡µæˆªå›¾ï¼ˆæŠ•é€ï¼‰" src="https://github.com/user-attachments/assets/0b1b34fa-c2a1-476e-a606-178ba5a13819" width="400"/>
</p>
</details>

## âœ¨ äº®ç‚¹

### ğŸ”€ è¾¹ä¼ è¾¹ä¸‹

> å¼€å§‹ä¸Šä¼ å³å¯ç«‹å³ä¸‹è½½ï¼Œä¼ äº†å¤šå°‘å°±èƒ½ä¸‹è½½å¤šå°‘ã€‚

* å¯æ ¹æ®å®é™…ç½‘ç»œæƒ…å†µï¼Œåœ¨é…ç½®ä¸­è‡ªå®šä¹‰æ–‡ä»¶åˆ†ç‰‡å¤§å°ï¼Œä¼˜åŒ–ä¼ è¾“ä½“éªŒã€‚

### ğŸ›œ å¿«æ·ä¼ è¾“

#### æ–¹æ³•1ï¼šç²˜è´´ä¸Šä¼ 

> ä½¿ç”¨ç²˜è´´å¿«æ·é”®ä¸€é”®ä¸Šä¼ å‰ªè´´æ¿ä¸­çš„æ–‡æœ¬æˆ–å›¾ç‰‡ã€‚

* å—å®‰å…¨ç­–ç•¥é™åˆ¶ï¼Œéæ–‡æœ¬å’Œå›¾ç‰‡ç±»å‹çš„å‰ªè´´æ¿å†…å®¹æ— æ³•ä¸Šä¼ ã€‚

#### æ–¹æ³•2ï¼šç³»ç»Ÿåˆ†äº«

> å°†å¿«ä¼ å®‰è£…ä¸º PWA åº”ç”¨ï¼Œé€šè¿‡ç³»ç»Ÿåˆ†äº«ä¸Šä¼ æ–‡æœ¬å’Œæ–‡ä»¶ã€‚

* ç›®å‰è¯¥æ–¹æ³•æ”¯æŒå®‰å“å’Œ Windows ç³»ç»Ÿã€‚
* å®‰å“è®¾å¤‡è¯·ä½¿ç”¨ Chrome æµè§ˆå™¨ï¼Œå¹¶ç¡®ä¿ Google Play å•†åº—åœ¨å®‰è£… PWA åº”ç”¨æ—¶å¯ç”¨ä¸”ç½‘ç»œç¯å¢ƒæ”¯æŒè®¿é—®è°·æ­ŒæœåŠ¡ã€‚
* åä¸ºï¼ˆé¸¿è’™ï¼‰è®¾å¤‡å®‰è£…**åŸç”Ÿ** GMS åäº¦å¯ä½¿ç”¨ï¼ŒHarmonyOS NEXT æ— æ³•ä½¿ç”¨ã€‚
* Windows è®¾å¤‡å»ºè®®ä½¿ç”¨ Edge æµè§ˆå™¨ã€‚

### æ–¹æ³•3ï¼šæœç´¢æå–

> åœ¨æœç´¢æ¡†ä¸­è¾“å…¥æå–ç ï¼Œå³å¯å¿«é€ŸæŸ¥æ‰¾å¹¶ä¸‹è½½æ–‡ä»¶ã€‚

* åœ¨æµè§ˆå™¨è®¾ç½®çš„â€œæœç´¢å¼•æ“â€ä¸­æ‰¾åˆ°â€œæ–‡ä»¶æå–â€æ¡ç›®ï¼Œå¯ç”¨åå¯ç›´æ¥åœ¨åœ°å€æ ä¸­å¿«é€Ÿæå–æ–‡ä»¶ã€‚

### â–¶ï¸ åœ¨çº¿æ’­æ”¾

> æ”¯æŒä½¿ç”¨æå–ç ç›´æ¥åœ¨çº¿æ’­æ”¾åª’ä½“æ–‡ä»¶ï¼Œæ— éœ€ä¸‹è½½ã€‚

* æ”¯æŒè¯»å–è§†é¢‘æ–‡ä»¶ä¸­çš„è½¯å­—å¹•ã€‚**æ³¨æ„ï¼Œè¿™ä¼šæ¶ˆè€—æ‚¨æ›´å¤šçš„æµé‡ã€‚**
* è¯¥åŠŸèƒ½æ”¯æŒè¾¹ä¸‹è¾¹æ’­ã€‚æ–‡ä»¶æœªä¸Šä¼ å®Œæˆå‰ï¼Œåª’ä½“æ–‡ä»¶éœ€æ”¯æŒæµåª’ä½“æ‰èƒ½æ­£å¸¸æ’­æ”¾ã€‚
* éè¾¹ä¸‹è¾¹æ’­çŠ¶æ€ä¸‹ï¼Œéæµåª’ä½“æ–‡ä»¶ä¹Ÿèƒ½æ­£å¸¸æ’­æ”¾ã€‚

### ğŸ’¼ æŒä¹…å…±äº«

> æ”¯æŒè®¾ç½®ä¸€ä¸ªå¸¸é©»çš„å…±äº«ç›®å½•ï¼Œåªéœ€å°†æ–‡ä»¶æ”¾å…¥è¯¥ç›®å½•ï¼Œå³å¯é€šè¿‡å¿«ä¼ ä¼ è¾“ã€‚

* å¦‚æœå…±äº«ç›®å½•æ‰€æŒ‡å‘çš„è·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™ä¸ä¼šç”Ÿæˆæå–ç ã€‚

### ğŸŒ  å¤œé—´æ¨¡å¼

> å½“ç³»ç»Ÿå¤„äºå¤œé—´æ¨¡å¼æ—¶ï¼Œå¿«ä¼ ä¹Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¤œé—´æ¨¡å¼ã€‚

### âš™ï¸ çµæ´»é…ç½®

> æ”¯æŒè‡ªå®šä¹‰ç«¯å£ã€æå–ç é•¿åº¦ã€è¿‡æœŸæ—¶é—´ç­‰å¤šé¡¹é…ç½®ã€‚

## ğŸ‘€ ä½¿ç”¨æ–¹æ³•

### å®‰è£…

```shell
npm install -g swift-share
```

### å¯åŠ¨

```shell
swift-share
```

### åœæ­¢

```
^C (Ctrl + C)
```

### å¸è½½

```shell
npm uninstall -g swift-share
```

### åå‘ä»£ç†

> å¯ä½¿ç”¨ `Nginx` ç­‰åå‘ä»£ç† Web æœåŠ¡å™¨å°†å¿«ä¼ éƒ¨ç½²åˆ°å­ç›®å½•ã€‚

> è¯·æ ¹æ®ä¸‹é¢çš„é…ç½®ç¤ºä¾‹è¿›è¡Œé…ç½®ï¼Œé”™è¯¯çš„é…ç½®å¯èƒ½å¯¼è‡´å¿«ä¼ éƒ¨åˆ†åŠŸèƒ½å¤±æ•ˆã€‚

#### Nginx

åœ¨ `nginx.conf` çš„ http å—ä¸­è¿½åŠ ä»¥ä¸‹é…ç½®ï¼Œä½¿å¾— HTTP åè®®å¯è¢«å‡çº§ä¸º WebSocket åè®®ã€‚

```nginx
# /etc/nginx/nginx.conf

http {
    ...

    # WebSocket
    map $http_upgrade $connection_upgrade {
        default upgrade;
        # é WebSocket å…³é—­è¿æ¥ï¼ˆå¯é€‰ï¼‰
        # '' close;
    }
}
```

åœ¨ `sites-available` ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå°†å¿«ä¼ éƒ¨ç½²åˆ° `/swift` å­è·¯å¾„ã€‚

* å¿…é¡»åŒ…å« `host` æ ‡å¤´ã€‚æ ¼å¼ä¸º `example.com:3000` ã€‚
* å½“ä½¿ç”¨ https æ—¶ï¼Œå¿…é¡»åŒ…å« `X-Forwarded-Proto` æ ‡å¤´ã€‚æ ¼å¼ä¸º `http` æˆ– `https` ã€‚
* å½“éƒ¨ç½²åœ¨å­è·¯å¾„æ—¶ï¼Œå¿…é¡»åŒ…å« `X-Forwarded-Path` æ ‡å¤´ï¼Œæ ¼å¼ä¸º `/example` ã€‚
* å½“éƒ¨ç½²åœ¨æ ¹ç›®å½•æ—¶ï¼Œ`X-Forwarded-Path` æ ‡å¤´å¿…é¡»ç§»é™¤æˆ–ç½®ç©ºã€‚

```nginx
# /etc/nginx/sites-available/default

server {
    listen 80; # IPv4 ç«¯å£
    listen [::]:80; # IPv6 ç«¯å£

    # ä½¿ç”¨ HTTP/2 åè®®ï¼ˆå¯é€‰ï¼‰
    # http2 on; 
    
    client_max_body_size 100M; # æå‡ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶
    
    location /swift {
        proxy_pass http://localhost:3000/; # æœ¬åœ°ç«¯å£
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Path /swift; # å­ç›®å½•
    }

    location /swift/ {
        proxy_pass http://localhost:3000/; # æœ¬åœ°ç«¯å£
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Path /swift; # å­ç›®å½•

        # WebSocket
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "$connection_upgrade";
    }
}
```

### é…ç½®

#### ç¼–è¾‘é…ç½®

```shell
swift-share --edit-config
```

#### é‡ç½®é…ç½®

```shell
swift-share --reset-config
```

#### æ¸…é™¤æ•°æ®

```shell
swift-share --clear
```

## â™¾ï¸ Biu~ å‘½ä»¤

> å¿«ä¼ æ²¡æœ‰ç‹¬ç«‹çš„ç®¡ç†é¡µé¢ï¼Œä»…æ”¯æŒç®€æ˜“çš„å‘½ä»¤ã€‚

### å¦‚ä½•ä½¿ç”¨ï¼Ÿ

å³é”®å•å‡»æˆ–æ‰‹æŒ‡é•¿æŒ‰ï¼ˆè§¦å‘ `contextmenu` äº‹ä»¶ï¼‰ä¸»é¡µä¸­çš„ç½‘ç«™å›¾æ ‡ï¼Œå³å¯æ‰“å¼€ä¼ªè£…çš„å‘½ä»¤çª—å£ã€‚

### æ‰§è¡Œç»“æœ

* å¦‚æœå‘½ä»¤åŒ¹é…æˆåŠŸï¼Œåˆ™æç¤º `å·²æ”¶åˆ°æ‚¨çš„åé¦ˆï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä¼šå¤„ç†ã€‚` ï¼Œå¦åˆ™æç¤º `å·²æ”¶åˆ°æ‚¨çš„åé¦ˆï¼Œæˆ‘ä»¬å°†å°½å¿«å¤„ç†ã€‚` ã€‚
* å‘½ä»¤çš„æ‰§è¡Œç»“æœå°†ä»¥ `console.log` çš„å½¢å¼è¾“å‡ºåˆ°æ—¥å¿—ã€‚

### å‘½ä»¤åˆ—è¡¨

> å¯åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰å‘½ä»¤åç§°ã€‚è®¾ç½®ä¸º `null` æ—¶ï¼Œè¡¨ç¤ºç¦ç”¨è¯¥å‘½ä»¤ã€‚

| å‘½ä»¤             | é»˜è®¤åç§°            | è¯´æ˜      |
|----------------|-----------------|---------|
| `GetAllCode`   | `/getallcode`   | è·å–æ‰€æœ‰æå–ç  |
| `ClearAllCode` | `/clearallcode` | æ¸…é™¤æ‰€æœ‰æå–ç  |
| `OpenConsole`  | `/openconsole`  | å¯ç”¨è™šæ‹Ÿæ§åˆ¶å° |

## âš ï¸ æ³¨æ„äº‹é¡¹

* å¿«ä¼ æœªè®¾è®¡ä»»ä½•ä¿æŠ¤æœºåˆ¶ï¼Œ**ä¸å»ºè®®**åœ¨å…¬ç½‘ç¯å¢ƒä¸‹éƒ¨ç½²ä½¿ç”¨ã€‚
* å…³é—­å¿«ä¼ åï¼Œå·²ä¸Šä¼ çš„æ–‡ä»¶å°†**è‡ªåŠ¨åˆ é™¤**ï¼Œå…±äº«æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ä¸å—å½±å“ã€‚
* å¦‚æœå‘ç”Ÿå¼‚å¸¸é€€å‡ºï¼Œåœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ¸…ç†æœªåˆ é™¤çš„æ–‡ä»¶ã€‚
